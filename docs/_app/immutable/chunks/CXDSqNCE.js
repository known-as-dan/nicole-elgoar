import{x as E,y as x,z as m,A as D,B as R,C as T,D as g,E as L,F as M,G as B,H as N,I as Y,J as F,K as C,L as U,M as k,N as K,O as y,P as z,Q as G,R as H,m as S,T as Z,U as $,V as q,W as J,X as Q,Y as V,u as W,h as X,Z as j,_ as ee,o as te,a0 as se,a1 as re,S as ae,a2 as ne}from"./Bawh50d-.js";class ie{anchor;#t=new Map;#s=new Map;#e=new Map;#r=new Set;#a=!0;constructor(e,s=!0){this.anchor=e,this.#a=s}#n=()=>{var e=E;if(this.#t.has(e)){var s=this.#t.get(e),r=this.#s.get(s);if(r)x(r),this.#r.delete(s);else{var f=this.#e.get(s);f&&(this.#s.set(s,f.effect),this.#e.delete(s),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),r=f.effect)}for(const[a,i]of this.#t){if(this.#t.delete(a),a===e)break;const n=this.#e.get(i);n&&(m(n.effect),this.#e.delete(i))}for(const[a,i]of this.#s){if(a===s||this.#r.has(a))continue;const n=()=>{if(Array.from(this.#t.values()).includes(a)){var o=document.createDocumentFragment();M(i,o),o.append(R()),this.#e.set(a,{effect:i,fragment:o})}else m(i);this.#r.delete(a),this.#s.delete(a)};this.#a||!r?(this.#r.add(a),D(i,n,!1)):n()}}};#i=e=>{this.#t.delete(e);const s=Array.from(this.#t.values());for(const[r,f]of this.#e)s.includes(r)||(m(f.effect),this.#e.delete(r))};ensure(e,s){var r=E,f=B();if(s&&!this.#s.has(e)&&!this.#e.has(e))if(f){var a=document.createDocumentFragment(),i=R();a.append(i),this.#e.set(e,{effect:T(()=>s(i)),fragment:a})}else this.#s.set(e,T(()=>s(this.anchor)));if(this.#t.set(r,e),f){for(const[n,u]of this.#s)n===e?r.unskip_effect(u):r.skip_effect(u);for(const[n,u]of this.#e)n===e?r.unskip_effect(u.effect):r.skip_effect(u.effect);r.oncommit(this.#n),r.ondiscard(this.#i)}else g&&(this.anchor=L),this.#n()}}function oe(t,e,s=!1){g&&Y();var r=new ie(t),f=s?F:0;function a(i,n){if(g){const o=C(t)===U;if(i===o){var u=k();K(u),r.anchor=u,y(!1),r.ensure(i,n),y(!0);return}}r.ensure(i,n)}N(()=>{var i=!1;e((n,u=!0)=>{i=!0,a(u,n)}),i||a(!1,null)},f)}let p=!1;function fe(t){var e=p;try{return p=!1,[t(),p]}finally{p=e}}function de(t,e=1){const s=t();return t(s+e),s}const ue={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function he(t,e,s){return new Proxy({props:t,exclude:e},ue)}function le(t,e,s,r){var f=!X||(s&j)!==0,a=(s&V)!==0,i=(s&re)!==0,n=r,u=!0,o=()=>(u&&(u=!1,n=i?W(r):r),n),h;if(a){var I=ae in t||ne in t;h=z(t,e)?.set??(I&&e in t?c=>t[e]=c:void 0)}var l,P=!1;a?[l,P]=fe(()=>t[e]):l=t[e],l===void 0&&r!==void 0&&(l=o(),h&&(f&&G(),h(l)));var d;if(f?d=()=>{var c=t[e];return c===void 0?o():(u=!0,c)}:d=()=>{var c=t[e];return c!==void 0&&(n=void 0),c===void 0?n:c},f&&(s&H)===0)return d;if(h){var O=t.$$legacy;return(function(c,v){return arguments.length>0?((!f||!v||O||P)&&h(v?d():c),c):d()})}var b=!1,_=((s&ee)!==0?te:se)(()=>(b=!1,d()));a&&S(_);var w=J;return(function(c,v){if(arguments.length>0){const A=v?S(_):f&&a?Z(c):c;return $(_,A),b=!0,n!==void 0&&(n=A),c}return q&&b||(w.f&Q)!==0?_.v:S(_)})}export{ie as B,oe as i,le as p,he as r,de as u};
